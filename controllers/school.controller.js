var week = require('../lowdb/week');
var room = require('../lowdb/room');
var db = require('../lowdb/db');

module.exports.week = function (req, res) {
  console.log(week.get('weeks').nth(1).value());
  res.redirect('/users');
}

module.exports.room = function (req, res) {
  console.log(room.get('class_room').nth(0).value());
  res.redirect('/users/create');
}

module.exports.selectStudents = function (req, res, next) {
  var studentID = req.params.studentId;
  var sessionID = req.signedCookies.sessionId;

  if (!sessionID) {
    res.redirect('/users');
    return;
  }

  var count = db.get('sessions')
      .find({ id : sessionID})
      .get('list.' + studentID, 0)
      .value();

  db.get('sessions')
      .find({ id: sessionID})
      .set('list.' + studentID, count+1)
      .write();

  res.redirect('/users');
}